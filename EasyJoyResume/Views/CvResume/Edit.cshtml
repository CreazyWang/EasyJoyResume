@{
    Layout = "~/Views/Shared/_LayoutResumeEdit.cshtml";
    EasyJoyResume.Models.ViewModel.resume_base Resume = ViewBag.ResumeBase;
}
@section ResumeModalManager{
    <div class="litemodal left_editor_modal" id="resume_modal_manager">
        <div class="modal-dialog show-swal1">
            <div class="modal-content">
                <div class="r-itembar r-basebar">
                    <div class="title"><span class="close"><i></i>缩起</span></div>
                    <div class="showcon itemcon">
                        <ul id="showul">
                            <li class="jbxx"><i class="icon"></i><span class="name" data-placeholder="基本信息">基本信息</span><a style="display: none;" title="隐藏此模块" for-id="base_info"></a><s>必填</s></li>
                            <li class="qzyx"><i class="icon"></i><span class="name" data-placeholder="求职意向">求职意向</span><a class="save_opt" title="隐藏此模块" for-id="resume_job_preference"></a></li>
                            <li class="jybj"><i class="icon"></i><span class="name" data-placeholder="教育背景">教育背景</span><a class="save_opt" title="隐藏此模块" for-id="resume_edu"></a></li>
                            <li class="gzjy"><i class="icon"></i><span class="name" data-placeholder="工作经验">工作经验</span><a class="save_opt" title="隐藏此模块" for-id="resume_work"></a></li>
                            <li class="zwpj"><i class="icon"></i><span class="name" data-placeholder="自我评价">自我评价</span><a class="save_opt" title="隐藏此模块" for-id="resume_summary"></a></li>
                            <li class="xqah"><i class="icon"></i><span class="name" data-placeholder="个人标签">个人标签</span><a class="save_opt" title="隐藏此模块" for-id="resume_hobby"></a></li>
                            <li class="zyjn"><i class="icon"></i><span class="name" data-placeholder="技能特长">技能特长</span><a class="save_opt" title="隐藏此模块" for-id="resume_skill"></a></li>
                        </ul>
                    </div>
                    <div class="hidecon itemcon">
                        <div class="addother-btn"><span class="name">添加其它模块</span></div>
                        <ul id="hideul">
                            <li style="height: 2px;margin: 0px;"></li>
                            <!-- 新增添加自定义模块 -->
                            <li class="fm"><i class="icon"></i><span class="name" data-placeholder="封面">封面</span><a class="save_opt jy-vip-lock" data-show-vip-type="resume" data_auth="cover" title="显示此模块" for-id="resume_cover"></a></li>
                            <li class="zjx"><i class="icon"></i><span class="name" data-placeholder="自荐信">自荐信</span><a class="save_opt jy-vip-lock" data-show-vip-type="resume" data_auth="letter" title="显示此模块" for-id="resume_letter"></a></li>
                            <li class="sxjy"><i class="icon"></i><span class="name" data-placeholder="实习经验">实习经验</span><a class="save_opt" title="显示此模块" for-id="resume_internship"></a></li>
                            <li class="zyjy"><i class="icon"></i><span class="name" data-placeholder="志愿者经验">志愿者经历</span><a class="save_opt" title="显示此模块" for-id="resume_volunteer"></a></li>
                            <li class="xmjy"><i class="icon"></i><span class="name" data-placeholder="项目经历">项目经验</span><a class="save_opt" title="显示此模块" for-id="resume_project"></a></li>
                            <li class="jxry"><i class="icon"></i><span class="name" data-placeholder="奖项荣誉">荣誉奖项</span><a class="save_opt" title="显示此模块" for-id="resume_honor"></a></li>
                            <li class="zpzs"><i class="icon"></i><span class="name" data-placeholder="作品展示">作品展示</span><a class="save_opt" title="显示此模块" for-id="resume_portfolio"></a></li>
                            <li class="ewm"><i class="icon"></i><span class="name" data-placeholder="二维码">二维码</span><a class="save_opt" title="显示此模块" for-id="resume_qrcode"></a></li>
                            <li class="add_custom"><i class="icon"></i><span class="name" data-placeholder="自定义模块">自定义模块</span><a class="save_opt" title="隐藏此模块" for-id=""></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
}   
@if (ViewBag.Type)
{
    @Html.Raw(ViewBag.Html)
}
else
{
    <div class="jyCv-baseStyle"
         id="resume_base"
         data_color=@Resume.resume_set.color
         data_font_name=@Resume.resume_set.font
         data_font_size=@Resume.resume_set.fontSize
         data_line_height=@Resume.resume_set.padding
         data_font_type=@Resume.resume_set.fontType
         resume_sort=@Resume.sort
         wap_resume_sort=""
         template_set=""
         data_itemid=@ViewBag.ItemId
         data_modal_margin=@Resume.resume_set.margin>
        <!--封面模块-->
        <div class="jyCv-cover @ViewBag.coverShow " id="resume_cover">
            <div class="coverItem  moduleItem">
                <div class="baseItem-toolbar">
                    <span class="edit"></span>
                    <span class="handle ui-sortable-handle"></span>
                    <span class="add save_opt"></span>
                    <span class="change_style"></span>
                    <span class="set">
                        <div class="set-con">
                            <div class="inner clearfix">
                                <div class="set-list hiddenTitle save_opt"><i>隐藏栏目标题</i><s></s></div>
                                <div class="set-list hiddenTime save_opt"><i>隐藏时间模块</i><s></s></div>
                                <div class="set-list hiddenText save_opt"><i>隐藏描述模块</i><s></s></div>
                                <!--<div class="set-list changeTitle save_opt"><i>修改栏目标题</i><a class="change">修改</a></div>-->
                                <div class="set-list recovery_style save_opt"><i>恢复初始样式</i><a class="recovery ">恢复</a></div>
                                <div class="set-list"><i class="noChange">删除当前模块</i><a class="delete">删除</a></div>
                            </div>
                        </div>
                    </span>
                </div>
                <dl>
                    <dt><div data-textlang="cover" contenteditable="false">封面</div></dt>
                    <dd>
                        <div class="cover-con">
                            @foreach (var item in Resume.resume_cover)
                            {
                                <div class="cover-list cover-name moduleItemList">
                                    <a class="jyfont divIconFont">@item.icon</a>
                                    <div contenteditable="true">@item.content</div>
                                    <a class="delete"></a>
                                </div>
                            }
                        </div>
                    </dd>
                </dl>
            </div>
        </div>
        <!--自荐书模块-->
        <div class="jyCv-letter @ViewBag.letterShow" id="resume_letter">
            <div class="letterItem moduleItem">
                <dl>
                    <dt><div data-textlang="letter" contenteditable="false">自荐信</div></dt>
                    <dd>
                        <div data-placeholder="在这里添加描述" contenteditable="true">
                            @Html.Raw(Resume.resume_letter)
                        </div>
                    </dd>
                </dl>
            </div>
        </div>
        <div class="jyCv-resume clearfix">
            <div class="jyCv-baseTop">
                @{
                    if (Resume.sort.top.Count > 0)
                    {
                        foreach (var item in Resume.sort.top)
                        {
                            @Html.Action("ResumeModule", "CvResume", new { item, Resume })
                        }

                    }
                }
            </div>
            <div class="jyCv-baseLeft ui-sortable" id="foo">
                @{
                    if (Resume.sort.left.Count > 0)
                    {
                        foreach (var item in Resume.sort.left)
                        {
                            @Html.Action("ResumeModule", new { item, Resume })
                        }

                    }
                }
            </div>
            <div class="jyCv-baseRight ui-sortable" id="bar">
                @{
                    if (Resume.sort.right.Count > 0)
                    {
                        foreach (var item in Resume.sort.right)
                        {
                            @Html.Action("ResumeModule", new { item, Resume })
                        }

                    }
                }
            </div>
            <div class="jyCv-baseBottom">
                @{
                    if (Resume.sort.bottom.Count > 0)
                    {
                        foreach (var item in Resume.sort.bottom)
                        {
                            @Html.Action("ResumeModule", new { item, Resume })
                        }

                    }
                }
            </div>
        </div>
    </div>
}

<script>

            if (typeof cvresume != "undefined") {
                cvresume.main.resume_draw(@ViewBag.ItemId , 0, 1097704, '');
                cvresume.main.set_language(@ViewBag.resume_language);
                cvresume.info.resumecontentid = 0;//内容简历模板id
                cvresume.main.template_set(@ViewBag.TemplateSet, 0);
            }
            // 对应简历模板的个人标签、块距生效js代码（只应用在文档简历）
            var _mobans_v620 = ["WM0008", "JM0289", "MR0031", "MR0029"];
            if ($.inArray("JM0369", _mobans_v620) != -1) {//当前模板块距调节无意义
                //隐藏块距功能
                $("#setStyleModal").find(".fgsz-modalmargin").addClass("hidden");
            }
            // 对应简历模板的个人标签、块距生效js代码（只应用在文档简历）
            var _mobans_v620 = ["WM0008", "JM0289", "MR0031", "MR0029"];
            if ($.inArray("JM0203", _mobans_v620) != -1) {//当前模板块距调节无意义
                //隐藏块距功能
                $("#setStyleModal").find(".fgsz-modalmargin").addClass("hidden");
            }
</script>