
@{
    Layout = null;
}
<!DOCTYPE html>
<html class="jl-member-bg">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>个人中心-账户设置 - 简悦</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link href="../../Content/editresume/bootstrap.min.css" rel="stylesheet" />
    <link href="../../Content/editresume/base.css" rel="stylesheet" />
    <link href="../../Content/common/common.css" rel="stylesheet" />
    <link href="../../Content/style.css" rel="stylesheet" />
    <link href="../../Content/layer.css" rel="stylesheet" />
    <script src="../../Scripts/jquery-1.8.0.js" type="text/javascript"></script>
    <script src="../../Scripts/utils.js" type="text/javascript"></script>
    <script src="../../Scripts/common_ext.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery.validate.js" type="text/javascript"></script>
    <script src="../../Scripts/pswd/jsbn.js" type="text/javascript"></script>
    <script src="../../Scripts/pswd/prng4.js" type="text/javascript"></script>
    <script src="../../Scripts/pswd/rng.js" type="text/javascript"></script>
    <script src="../../Scripts/pswd/rsa.js" type="text/javascript"></script>
    <script src="../../Scripts/pswd/base64.js" type="text/javascript"></script>
    <script src="/../Scripts/layer.js" type="text/javascript"></script>
    <link rel="stylesheet" href="../../Scripts/skin/layer.css" id="layui_layer_skinlayercss" style="">
    <script src="../../Scripts/plugin/modal/modal.js"></script>
    <script src="../../Scripts/login.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery.lazyload.min.js"></script>
    <script src="~/Scripts/ajaxfileupload.js"></script>
</head>
<body class="jl-member-bg">
    <div class="   <ul class="clearfix">"></div>
    <div class="print-modal" style="display: none;">
        <h4 class="h4-title">添加新地址</h4>
        <form id="receiverFrom">
            <input type="hidden" name="id" id="updateId">
            <input type="hidden" name="token" id="token">
            <input type="hidden" id="date_c" value="1">
            <input type="hidden" id="date_z" value="1">
            <div class="from-div clearfix">
                <div class="name left"><label><i>*</i>收货人姓名</label><input type="text" name="consignee" maxlength="15" placeholder="用于确认收货人"></div>
                <div class="tel left"><label><i>*</i>手机号</label><input type="tel" name="phone" length="11" placeholder="用于快递联系"></div>
                <div class="qq left"><label><i>*</i>QQ号</label><input type="tel" name="qq" placeholder="用于客服联系你"></div>
            </div>
            <div class="from-div clearfix">
                <label><i>*</i>收货人地址</label>
                <div id="print-distpicker">
                    <input type="hidden" id="areaId" name="areaId"><select name="areaId_select" style="margin-right: 4px;"><option value="">请选择...</option><option value="1">北京市</option><option value="18">天津市</option><option value="35">河北省</option><option value="219">山西省</option><option value="351">内蒙古自治区</option><option value="465">辽宁省</option><option value="580">吉林省</option><option value="650">黑龙江省</option><option value="792">上海市</option><option value="810">江苏省</option><option value="926">浙江省</option><option value="1028">安徽省</option><option value="1150">福建省</option><option value="1245">江西省</option><option value="1357">山东省</option><option value="1515">河南省</option><option value="1692">湖北省</option><option value="1809">湖南省</option><option value="1946">广东省</option><option value="2089">广西壮族自治区</option><option value="2213">海南省</option><option value="2240">重庆市</option><option value="2279">四川省</option><option value="2482">贵州省</option><option value="2580">云南省</option><option value="2726">西藏自治区</option><option value="2807">陕西省</option><option value="2925">甘肃省</option><option value="3026">青海省</option><option value="3078">宁夏回族自治区</option><option value="3106">新疆维吾尔自治区</option><option value="3219">台湾省</option><option value="3292">香港特别行政区</option><option value="3314">澳门特别行政区</option></select>
                </div>
            </div>
            <div class="from-div clearfix"><label><i>*</i>详细地址</label><input class="daddr" name="address" minlength="3" maxlength="50" type="text" placeholder="请输入3-50个汉字的详细地址，例如路名、门牌号"></div>
            <div class="button-div"><button type="button" class="submit">确认</button><button type="reset" class="cancel">取消</button></div>
        </form>
    </div>
    <div id="mark_mask" style="display:none;position:fixed;top:40px;left:0;z-index:99999999;height:1000px;width:100%;background:rgba(0,0,0,0.4);"></div>
    <div class="jl-header">
        <div class="jl-logo">
            <h1><a href="/">简悦</a></h1>
        </div>
        <div class="jl-touxiang" id="userHead">
            <a class="jl-tx-img" id="user_center" href="/Member/Myresume/">
                <i style="display: none;"></i>
                <img src="/../images/0.png" alt="" width="48" height="48">
                <span>个人中心</span>
            </a>
            <div class="jl-user-info" style="display: none;">
                <span class="triangle-up"></span>
                <div class="user-bd">
                    <ul class="user-ul-l">
                        <li class="sz"><a href="/Member/Myresume/">我的简历</a></li>
                        <li class="dd"><a href="/Member/Order/">订单管理</a></li>
                        <li class="gj"><a href="/Member/ResumeSendEdit">简历投递</a></li>
                        <li class="sc"><a href="/Member/Set/">账号设置</a></li>
                        <li class="tc"><a href="#" id="user_logout">安全退出</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="jl-login">
            <a style="display:none;" id="login" class="jl-login-a">登录&nbsp;/&nbsp;注册</a>
        </div>
        <div class="jl-nav">
            <ul>
                <li class="nav-li"><a href="/CvResume/CvTemplate">在线制作</a></li>
                <li class="nav-li"><a href="/Article">简历技巧</a></li>
                @*<li class="nav-li other-nav-li">
                        <a href="javascript:;"></a>
                        <div class="jl-ej-nav">
                            <ul>
                                <li><a href="/common/joinus/">咨询客服</a></li>
                                <li><a href="/common/joinus/">关于我们</a></li>
                            </ul>
                        </div>
                    </li>*@
            </ul>
        </div>
    </div>

    <script type="text/javascript">
        $(document).ready(function () {
            common.main.loginMsg();

        });
    </script>
    <div class="member-index">
        <h1>账户设置</h1>
        <div class="inner">
            <div class="member-index-hd clearfix">
                <div class="info">
                    <div class="headimg">
                        <a id="headfileBtn">点击更换头像</a><img id="changehead" src="~/images/0.png" width="90" height="90">
                        <input type="file" name="file" style="display:none" id="headfile">
                    </div>
                    <a class="btn" id="a_headfileBtn">更换头像</a>
                </div>
            </div>
            <div class="member-index-bd">
                <ul class="clearfix">
                    <li class="email">
                        <p>邮箱：<span>sblujiang@outlook.com</span> </p>
                    </li>

                    <li class="pwd"><p>密码：<span>******   </span><a  href="/member/password/">修改密码</a></p></li>
 
                </ul>
            </div>
            <div class="jl-member-set">
                <div class="grszDiv clearfix">



                </div>
            </div>
        </div>
    </div>

    <!--右边导航条显示在线客服，帮助中心，返回顶部这三个按钮-->
    <!--回到顶部-->
    <script>
        $(document).ready(function () {
            common.main.gotop();
        });
    </script>
    <!--右边导航条显示在线客服，帮助中心，返回顶部这三个按钮-->
    <!--回到顶部-->
    <script>
        $(document).ready(function () {
            common.main.gotop();
        });
    </script>
    <div class="jl-index_bottom1">
        <div class="g-w1240">
            <p class="p_copy">Copyright © 2018-@DateTime.Now.Year jy500.cn. All Rights Reserved. </p>
            <p class="p_foot_bar">
                <a href="/common/joinus/" target="_blank">关于我们</a>&nbsp;&#45;&nbsp;
                <a href="/common/joinus/" target="_blank">加入我们</a>&nbsp;&#45;&nbsp;
                <a href="/common/joinus/" target="_blank">联系我们</a>&nbsp;&#45;&nbsp;
                <a href="/help/" target="_blank">帮助中心</a>&nbsp;&#45;&nbsp;
                <a href="/sitemap.html" target="_blank">网站地图</a>
            </p>
            </p>
        </div>
    </div>

    <!--账户登录-->
    <div class="modal lrModal" id="zhloginModal">
        <div class="modal-dialog zhlogin show-swal2">
            <div class="modal-content">
                <div class="hd">
                    <h2>账号登录</h2>
                </div>
            </div>
            <div class="cd">
                <form class="zhlogin-form" method="POST" action="/login/submit/" id="loginForm">
                    <input type="hidden" name="service" value="">
                    <div class="valid-msg" style="display:none">
                        <p class="error incorrect_username">你输入的密码与账号名不匹配，是否<a href="#" data-toggle="modal" data-target="#zhpasswordModal" data-dismiss="modal" aria-hidden="true"> 忘记密码?</a></p>
                        <p class="error null_tips" style="display:none">请输入登录账号和密码</p>
                    </div>
                    <div class="field username-field">
                        <label title="手机号 / 邮箱"></label>
                        <input type="text" name="username" placeholder="手机号 / 邮箱">
                    </div>
                    <div class="field pwd-field">
                        <label title="密码"></label>
                        <input type="password" name="password" placeholder="密码">
                    </div>
                    <div class="submit">
                        <button type="button">
                            <input class="loading1 spin " style="display:none">
                            登录
                        </button>
                    </div>
                </form>
            </div>
            <div class="bd">
                <a class="zc right" href="#" data-toggle="modal" data-target="#regemailModal" data-dismiss="modal" aria-hidden="true">邮箱注册</a>
                <a class="wj right " href="#" data-toggle="modal" data-target="#zhpasswordModal" data-dismiss="modal" aria-hidden="true">忘记密码？</a>
            </div>
        </div>
    </div>
    <!--邮箱注册-->
    <div class="modal lrModal" id="regemailModal">
        <div class="modal-dialog reg show-swal2">
            <div class="modal-content">
                <div class="hd">
                    <h2>邮箱注册</h2>
                    <div class="other-yzc ">已注册<a href="#" data-toggle="modal" data-target="#zhloginModal" data-dismiss="modal" aria-hidden="true"> 登录</a></div>
                </div>
                <div class="cd">
                    <form class="reg-form" id="regEmailForm" action="/register/submit/" method="POST">
                        <input name="captchaId" type="hidden" value="">
                        <div class="field phone-field">
                            <label title="邮箱 ">邮箱</label>
                            <input id="emailNum" type="email" name="email" autocomplete="off" placeholder="请输入你的邮箱地址 ">
                            <div class="valid-tips">
                                <p class="tips">验证完后，你可以用该邮箱登录和找回密码</p>
                            </div>
                            <div class="valid-error">
                                <p class="error"></p>
                            </div>
                        </div>
                        <div class="field pwd-field">
                            <label title="密码">设置密码</label>
                            <input type="password" name="password" autocomplete="off" placeholder="密码">
                            <div class="valid-tips">
                                <p class="tips">只能使用字母、数字、下划线，6-20个字符</p>
                            </div>
                            <div class="valid-error">
                                <p class="error"></p>
                            </div>
                        </div>
                        <div class="field code-field">
                            <label title="验证码">验证码</label>
                            <input type="text" placeholder="请输入验证码" name="captchaCode">
                            <img class="codeimg captchaImage" src="">
                            <div class="valid-error">
                                <p class="error">请输入正确的验证码</p>
                            </div>
                        </div>
                        <div class="submit">
                            <button type="button">
                                <input class="loading1 spin " style="display:none">
                                注册
                            </button>
                        </div>
                        <div class="agreement_field">点击 [ 注册 ] 按钮，即代表你同意<a href="http://static.500d.me/resources/html/member/agreement.html" target="_blank">《简悦用户协议》</a></div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!--找回密码-->
    <div class="modal lrModal" id="zhpasswordModal">
        <div class="modal-dialog zhpwd show-swal2">
            <div class="modal-content">
                <div class="hd">
                    <h2>找回密码</h2>
                </div>
                <div class="cd">
                    <form class="zhlogin-form" id="zhpwdForm">
                        <input name="captchaId" type="hidden" value="">
                        <input name="mid" type="hidden" value="SMS_61910002">
                        <div class="field username-field">
                            <label title="手机号 / 邮箱">用户名：</label>
                            <input type="text" placeholder="请输入你的注册手机号/邮箱" autocomplete="off" name="username">
                            <div class="valid-error">
                                <p class="error">请输入正确的手机号或邮箱</p>
                            </div>
                        </div>
                        <div class="field code-field">
                            <label title="验证码：">验证码：</label>
                            <input type="text" placeholder="请输入验证码" name="captchaCode" autocomplete="off">
                            <img class="codeimg captchaImage" src="">
                            <div class="valid-error">
                                <p class="error">请输入正确的验证码</p>
                            </div>
                        </div>
                        <div class="submit">
                            <button type="button">
                                <input class="loading1 spin " style="display:none" />
                                提交
                            </button>
                        </div>
                    </form>
                </div>
                <div class="bd">
                    <a class="wx login_wx" href="#" data-toggle="modal" data-target="#zhloginModal" data-dismiss="modal" aria-hidden="true">账号登录</a>
                    <a class="zc right " href="#" data-toggle="modal" data-target="#regemailModal" data-dismiss="modal" aria-hidden="true">邮箱注册</a>
                </div>
            </div>
        </div>
    </div>
    <!--验证邮箱身份-->
    <div class="modal lrModal" id="yzemailModal">
        <div class="modal-dialog zhpwd show-swal2">
            <div class="modal-content">
                <div class="hd">
                    <h2>验证邮箱</h2>
                </div>
                <div class="cd">
                    <form>
                        <p>亲爱的用户，邮件发送完成，请登录邮箱进行验证</p>
                        <div class="yz">已发送邮件至：<i>service@500d.me</i><a data-toggle="modal" data-target="#zhpasswordModal" data-dismiss="modal" aria-hidden="true">修改邮箱</a></div>
                        <div class="submit">
                            <button type="button" id="forward_validate_email">
                                <input class="loading1 spin" style="display:none" />
                                前往邮箱验证
                            </button>
                        </div>
                    </form>
                </div>
                <div class="zhemailtips">
                    <i>如果没有收到验证邮件，可能是：</i><br>
                    1.邮件被外星人劫持到垃圾箱了~<br>
                    2.请检查邮箱地址是否正确~
                </div>
            </div>
        </div>
    </div>
    <script>
        /***
         * 展示登录框
         */
        function show_login_modal() {
            $("#zhloginModal").modal("show");
        }
    </script>

    <script type="text/javascript">

        if ($.browser.msie) {
            $("#headfile").css("display", "block");
        }
        $("#changehead").click(function () {
            if (!$.browser.msie) {
                $("#headfile").trigger("click");
            }
        });
        $("#headfileBtn,#a_headfileBtn").click(function () {
            $("#headfile").trigger("click");
        });
        $("#headfile").live('change', function () {
            var name = $(this).val();
            var fileName = name.substring(name.lastIndexOf("\\") + 1);
            var fileType = name.substring(name.lastIndexOf(".") + 1);
            if (fileType.toLocaleLowerCase() != "jpg" && fileType.toLocaleLowerCase() != "png") {
                alert("只支持jpg，png文件格式！");
                return;
            }
            if (!common.main.checkSize($(this)[0], true, 1))
                return;
            $.ajaxFileUpload({
                type: 'post',
                secureuri: false,
                dataType: 'content',
                fileElementId: 'headfile',
                url: '/file/uploadhead/',
                data: { "token": getCookie("token") },
                success: function (data, status) {
                    if (data == "error")
                        alert("修改失败，请检测文件是否损坏或者重新选择图片！");
                    else {
                        
                        if ($.browser.msie) {
                            if (data.indexOf('<PRE>') >= 0) {
                                data = data.substring(5);
                                data = data.substring(0, data.length - 6);
                            }
                        }
                        $("#changehead").attr("src", data);
                    }
                },
                error: function (data, status, e) {
                    alert("发生错误" + e);
                }
            });
        });
        // 地区选择
        $("#areaId").lSelect({
            url: "/common/area/"
        });
        $(".print-modal .cancel,.   <ul class="clearfix">").click(function () {
            $(".   <ul class="clearfix">").stop().fadeOut(300).css('z-index', '100');
            $(".print-modal").stop().fadeOut();
        });
        //添加新地址
        $(".address").click(function () {
            $(".   <ul class="clearfix">").stop().fadeIn(300).css('z-index', '120');
            $(".print-modal").stop().fadeIn(300);
        });
        //修改地址
        $("a.modify").live("click", function () {
            var data_id = $(this).attr("data_id");
            $("#updateId").val(data_id);
            $("input[name='consignee']").val($(this).attr("data_consignee"));
            $("input[name='phone']").val($(this).attr("data_phone"));
            $("input[name='address']").val($(this).attr("data_address"));
            $("input[name='qq']").val($(this).attr("data_qq"));
            // 地区选择
            $("#areaId").val($(this).attr("data_areaId")).attr("treePath", $(this).attr("data_treePath"));
            $("#areaId").lSelect({
                url: "/common/area/"
            });
            $(".   <ul class="clearfix">").stop().fadeIn(300).css('z-index', '120');
            $(".print-modal").stop().fadeIn(300);
        });

        $("button.submit").click(function () {
            var consignee = $("input[name='consignee']").val();
            var phone = $("input[name='phone']").val();
            var qq = $("input[name='qq']").val();
            var areaId = $("#areaId").val();
            var address = $("input[name='address']").val();
            if (consignee == null || consignee == "") {
                layer.msg("请填写收货人~");
                return;
            }
            if (phone == null || phone == "") {
                layer.msg("请填写收货人手机号~");
                return;
            }

            if (qq == null || qq == "") {
                layer.msg("请填写QQ号~");
                return;
            }
            if (isNaN(phone) || phone.length != 11) {
                layer.msg("请填写正确的手机号~");
                return;
            }

            if (areaId == null || areaId == "") {
                layer.msg("请选择收货地址~");
                return;
            }
            if (address == null || address == "") {
                layer.msg("请填写收货详细地址~");
                return;
            }
            var areaSelectId = $("select[name='areaId_select'] option:selected:last").val();
            if (areaSelectId == null || areaSelectId == "") {
                layer.msg("请选择完整的省市区地址~");
                return;
            }
            var treepath = ",";
            if ($("#areaId").attr("treepath") != null && $("#areaId").attr("treepath") != "" && $("#areaId").attr("treepath") != undefined) {
                treepath = $("#areaId").attr("treepath");
            } else {
                $("select[name='areaId_select'] option:selected").each(function (index, ele) {
                    if (index != $("select[name='areaId_select'] option:selected").length - 1) {
                        treepath = treepath + $(ele).val() + ",";
                    }
                });
            }
            var data_receiver_id = $("#updateId").val();
            $("#token").val(getCookie("token"));
            $.post("/member/receiver/save/", $("#receiverFrom").serialize(), function (message) {
                if (message.type == "success") {
                    if (data_receiver_id != null && data_receiver_id != "") {
                        $('a.modify[data_id="' + data_receiver_id + '"]').closest("li").empty();
                    }
                    var data_id = message.content;
                    $("#receiverid").val(data_id);
                    var areaName = $("select[name='areaId_select'] option:selected").text();
                    var html = '<p>地址：<span>' + areaName + address + '</span><a class="modify" data_id="' + data_id + '" data_consignee="' + consignee + '" data_phone="' + phone + '" data_treepath="' + treepath + '" data_areaId="' + $("#areaId").val() + '" data_qq="' + qq + '" data_address="' + address + '">[修改地址]</a></p>'
                    $("li.addr").html(html);
                    $(".   <ul class="clearfix">").stop().fadeOut(300).css('z-index', '100');
                    $(".print-modal").stop().fadeOut(300);
                } else {
                    layer.msg(message.content);
                }
                $("#updateId").val("");
            });
        });


    </script>

    <div class="gotop" style="display: none;"></div>
</body>
</html>